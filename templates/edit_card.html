<!--
Copyright (C) 2011 Braden Walters

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

{% extends "base.html" %}

{% block title %}Edit Card{% endblock %}

{% block head %}
	<script type="text/javascript">
		{% if id != None %}
			function ConfirmDelete(var url)
			{
				document.getElementById("confirm_delete").innerHTML =
				"Are you sure you'd like to delete this card:<br /\>" +
				"<a href=\"{% url delete-card set_id id %}\">Yes</a><br /\>" +
				"<a href=\"javascript:ClearConfirmDelete();\">No</a><br /\>";
			}

			function ClearConfirmDelete()
			{
				document.getElementById("confirm_delete").innerHTML = "";
			}
		{% endif %}
	</script>
{% endblock %}

{% block body %}
	<div style="text-align: center;"><a href="{% url centre %}"><img src="{{ STATIC_URL }}karteikarten.png" alt="Karteikarten System" /></a></div>
	<div class="block" style="width: 200px; text-align: center;">
		<form action="{% if already_exists %}{% url edit-card-submit set_id id %}{% else %}{% url new-card-submit set_id %}{% endif %}" method="post">
			{% csrf_token %}
			Front: <textarea name="front" class="box">{% if already_exists %}{{ front }}{% endif %}</textarea><br />
			Back: <textarea name="back" class="box">{% if already_exists %}{{ back }}{% endif %}</textarea><br />
			<select name="card_box">
				{% for card_box in card_boxes %}
					<option value="{{ card_box.pk }}" {% if current_box != None and current_box != 'no_box' %}{% if card_box.pk == current_box %}selected="selected"{% endif %}{% endif %}>{{ card_box.name }}</option>
				{% endfor %}
				<option value="0" {% if current_box == 'no_box' %}selected="selected"{% endif %}>[No Box]</option>
			</select>
			<br />
			<input type="submit" value="{% if already_exists %}Edit{% else %}Create{% endif %}" class="box"/>
		</form>
		<br />
		{% if already_exists %}
			<a href="javascript:ConfirmDelete();">Delete</a>
			<div id="confirm_delete"></div>
		{% endif %}
	</div>
{% endblock %}

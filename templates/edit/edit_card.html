{% extends "base_page.html" %}

{% comment %}
Copyright (C) 2012 Braden Walters

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}

{% load i18n %}

{% block head %}
	<script type="text/javascript" src="{{ STATIC_URL }}ajax_form_submit.js"></script>
	{% if not already_exists %}
		<script type="text/javascript">
			$(document).ready(function()
			{
				AjaxFormSubmit($('#form'), $('#loading'), $('#success'), $('#error'), $('#error_message'));
			});
		</script>
	{% endif %}
{% endblock %}

{% block body %}
	<div id="error" class="ajax_error">
		{% trans "error-occurred-card-data-not-saved" %}<br /><br />
		<b>{% trans "message" %}:</b><br />
		<span id="error_message" />
	</div>
	<div id="success" class="ajax_success">
		{% trans "success" %}!
	</div>
	<form id="form" action="{% if already_exists %}{% url edit-card set_id id %}{% else %}{% url new-card set_id %}{% endif %}" method="post" class="box_form">
		{% csrf_token %}
		{% for field in form %}
			{{ field.label_tag }}: {{ field }}
			{{ field.errors }}
		{% endfor %}
		<br /><br />
		<input type="submit" value="{% if already_exists %}{% trans "edit" %}{% else %}{% trans "create" %}{% endif %}" class="box"/>
	</form>
	<div id="loading" style="display: none;">
		<img src="{{ STATIC_URL }}ajax-loader.gif" alt="{% trans "loading" %}..." />
	</div>
{% endblock %}
